function dxdt = rocket(t, x)

    l = 1;
    h = 2;
    b = 0.2;
    
    k = 1600;
    g = 9.81;

    u = zeros(2,1);

    if(x(7,1) > 100)
        u(2,1) = (x(7,1))/100;
    end
    
    angle = 0.5;
%     if t > 10
%         angle = atan2(abs(x(4,1)), x(6,1));
%     end
    
    u(1,1) = 0.05*(-x(1,1)-angle) -1.2*x(2,1);
    
    dxdt = zeros(7, 1);
    
    dxdt(1,1) = x(2, 1);
    dxdt(2,1) = 12*l/((h^2 + b^2)*x(7,1))*u(1,1) - x(2,1)/x(7,1)*u(2,1);
    dxdt(3,1) = x(4,1);
    dxdt(4,1) = cos(x(1,1))/x(7,1)*u(1,1) - (x(4,1) + sin(x(1,1))*k)/x(7,1)*u(2,1) - 0.5*1.225*(x(3,1)^2 + x(5,1)^2)^.5*1*b^2*x(3,1)/x(7,1);
    dxdt(5,1) = x(6,1);
    dxdt(6,1) = sin(x(1,1))/x(7,1)*u(1,1) - g + (x(6,1) + cos(x(1,1))*k)/x(7,1)*u(2,1) - 0.5*1.225*(x(3,1)^2 + x(5,1)^2)^.5*1*b^2*x(5,1)/x(7,1);
    dxdt(7,1) = -u(2,1);
    
    if(x(5,1) < 0)
        dxdt(1,1) = 0;
        dxdt(2,1) = 0;
        dxdt(3,1) = 0;
        dxdt(4,1) = 0;
        dxdt(5,1) = 0;
        dxdt(6,1) = 0;
    end
end